"use client";
"use strict";var e=require("react/jsx-runtime"),t=require("react"),n=require("../util/script.js"),r=t.createContext(""),o=t.createContext((function(){}));function c(e,n){var r=t.useState(!1),o=r[0],c=r[1];t.useEffect((function(){if(o)return e();c(!0)}),n)}exports.ThemeProviderWithoutServerTheme=function(u){var i=u.children,s=u.serverTheme,a=u.systemLightTheme,m=u.systemDarkTheme,f=u.attributes,d=t.useState(s),h=d[0],l=d[1];return t.useEffect((function(){if("system"===h){var e=function(e){e.matches?[f].flat().forEach((function(e){document.documentElement.setAttribute(e,m)})):[f].flat().forEach((function(e){document.documentElement.setAttribute(e,a)}))},t=window.matchMedia("(prefers-color-scheme: dark)");return t.addEventListener("change",e),"undefined"!=typeof window&&window.matchMedia("(prefers-color-scheme: dark)").matches?[f].flat().forEach((function(e){document.documentElement.setAttribute(e,m)})):[f].flat().forEach((function(e){document.documentElement.setAttribute(e,a)})),function(){return t.removeEventListener("change",e)}}[f].flat().forEach((function(e){document.documentElement.setAttribute(e,h)}))}),[h]),c((function(){"undefined"!=typeof cookieStore?cookieStore.set("theme",h):document.cookie="theme=".concat(h,";"),localStorage.setItem("theme",h)}),[h]),t.useEffect((function(){function e(e){var t=e.key,n=e.newValue;"theme"===t&&l(n)}return window.addEventListener("storage",e),function(){return window.removeEventListener("storage",e)}}),[]),e.jsx(o.Provider,{value:l,children:e.jsxs(r.Provider,{value:h,children:["system"===s&&e.jsx("script",{dangerouslySetInnerHTML:{__html:"(".concat(n.setSystemDark.toString(),')("').concat(f,'", "').concat(a,'", "').concat(m,'")')}}),i]})})},exports.useGetTheme=function(){return t.useContext(r)},exports.useOnChange=c,exports.useSetTheme=function(){return t.useContext(o)},exports.useTheme=function(){return[t.useContext(r),t.useContext(o)]};
//# sourceMappingURL=theme.context.js.map
