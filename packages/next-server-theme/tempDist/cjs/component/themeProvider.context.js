"use client";
"use strict";var e=require("react/jsx-runtime"),t=require("react"),s=require("../util/setBackgroundTheme.js"),o=require("../util/useOnChange.js");const n=t.createContext(""),r=t.createContext(""),c=t.createContext((()=>{}));exports.ThemeProvider=function({children:i,defaultTheme:u="system",defaultResolvedTheme:a,themes:d,themeKey:m,resolvedThemeKey:h,systemLightTheme:l="light",systemDarkTheme:f="dark",element:g="html",attributes:k="class",staticRender:p=!1,nonce:v}){const[x,y]=t.useState(u),[T,w]=t.useState(a??("system"===x?l:x));return o.useOnChange((()=>{if("system"===x){const e=({matches:e})=>{s.setBackgroundTheme(e?f:l,g,k,d),w(e?f:l)},t=window.matchMedia("(prefers-color-scheme: dark)");return t.addEventListener("change",e),e(t),()=>t.removeEventListener("change",e)}s.setBackgroundTheme(x,g,k,d)}),[x]),o.useOnChange((()=>{"undefined"!=typeof cookieStore?cookieStore.set(m,x):document.cookie=`theme=${x};`,localStorage.setItem(m,x)}),[x]),o.useOnChange((()=>{"undefined"!=typeof cookieStore?cookieStore.set(h,T):document.cookie=`resolvedTheme=${T};`,localStorage.setItem(h,T)}),[T]),t.useEffect((()=>{function e({key:e,newValue:t}){e===m?y(t):e===h&&w(t)}return p&&y(document.cookie.match("(^|;)\\s*"+m+"\\s*=\\s*([^;]+)")?.pop()||u),"system"===x&&w(window.matchMedia("(prefers-color-scheme: dark)").matches?f:l),window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)}),[]),e.jsx(c.Provider,{value:y,children:e.jsx(n.Provider,{value:x,children:e.jsxs(r.Provider,{value:"system"===x?T:x,children:[p?e.jsx("script",{dangerouslySetInnerHTML:{__html:`(${s.setBackgroundTheme.toString()})((document.cookie.match("(^|;)\\\\s*" + "${m}" + "\\\\s*=\\\\s*([^;]+)")?.pop() || "${u}") === "system" ? window.matchMedia("(prefers-color-scheme: dark)").matches ? "${f}" : "${l}" : document.cookie.match("(^|;)\\\\s*" + "theme" + "\\\\s*=\\\\s*([^;]+)")?.pop() || "${u}" , "${g}", "${k}", ${JSON.stringify(d)})`},nonce:v?"undefined"==typeof window?v:"":void 0}):"system"===u&&e.jsx("script",{dangerouslySetInnerHTML:{__html:`(${s.setBackgroundTheme.toString()})(window.matchMedia("(prefers-color-scheme: dark)").matches ? "${f}" : "${l}", "${g}", "${k}", ${JSON.stringify(d)})`},nonce:v?"undefined"==typeof window?v:"":void 0}),i]})})})},exports.useGetResolvedTheme=function(){return t.useContext(r)},exports.useGetTheme=function(){return t.useContext(n)},exports.useSetTheme=function(){return t.useContext(c)},exports.useTheme=function({resolved:e=!1}={}){return e?[t.useContext(r),t.useContext(c)]:[t.useContext(n),t.useContext(c)]};
//# sourceMappingURL=themeProvider.context.js.map
