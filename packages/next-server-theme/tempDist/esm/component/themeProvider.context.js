"use client";
import{jsx as e,jsxs as t}from"react/jsx-runtime";import{createContext as o,useContext as r,useState as n,useEffect as s}from"react";import{setBackgroundTheme as i}from"../util/setBackgroundTheme.js";import{useOnChange as c}from"../util/useOnChange.js";const m=o(""),d=o(""),a=o((()=>{}));function h({children:o,defaultTheme:r="system",defaultResolvedTheme:h,themes:u,themeKey:l,resolvedThemeKey:f,systemLightTheme:p="light",systemDarkTheme:y="dark",element:v="html",attributes:k="class",staticRender:w=!1,nonce:$}){const[g,S]=n(r),[T,L]=n(h??("system"===g?p:g));return c((()=>{if("system"===g){const e=({matches:e})=>{i(e?y:p,v,k,u),L(e?y:p)},t=window.matchMedia("(prefers-color-scheme: dark)");return t.addEventListener("change",e),e(t),()=>t.removeEventListener("change",e)}i(g,v,k,u)}),[g]),c((()=>{"undefined"!=typeof cookieStore?cookieStore.set(l,g):document.cookie=`theme=${g};`,localStorage.setItem(l,g)}),[g]),c((()=>{"undefined"!=typeof cookieStore?cookieStore.set(f,T):document.cookie=`resolvedTheme=${T};`,localStorage.setItem(f,T)}),[T]),s((()=>{function e({key:e,newValue:t}){e===l?S(t):e===f&&L(t)}return w&&S(document.cookie.match("(^|;)\\s*"+l+"\\s*=\\s*([^;]+)")?.pop()||r),"system"===g&&L(window.matchMedia("(prefers-color-scheme: dark)").matches?y:p),window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)}),[]),e(a.Provider,{value:S,children:e(m.Provider,{value:g,children:t(d.Provider,{value:"system"===g?T:g,children:[w?e("script",{dangerouslySetInnerHTML:{__html:`(${i.toString()})((document.cookie.match("(^|;)\\\\s*" + "${l}" + "\\\\s*=\\\\s*([^;]+)")?.pop() || "${r}") === "system" ? window.matchMedia("(prefers-color-scheme: dark)").matches ? "${y}" : "${p}" : document.cookie.match("(^|;)\\\\s*" + "theme" + "\\\\s*=\\\\s*([^;]+)")?.pop() || "${r}" , "${v}", "${k}", ${JSON.stringify(u)})`},nonce:$?"undefined"==typeof window?$:"":void 0}):"system"===r&&e("script",{dangerouslySetInnerHTML:{__html:`(${i.toString()})(window.matchMedia("(prefers-color-scheme: dark)").matches ? "${y}" : "${p}", "${v}", "${k}", ${JSON.stringify(u)})`},nonce:$?"undefined"==typeof window?$:"":void 0}),o]})})})}function u({resolved:e=!1}={}){return e?[r(d),r(a)]:[r(m),r(a)]}function l(){return r(m)}function f(){return r(d)}function p(){return r(a)}export{h as ThemeProvider,f as useGetResolvedTheme,l as useGetTheme,p as useSetTheme,u as useTheme};
//# sourceMappingURL=themeProvider.context.js.map
