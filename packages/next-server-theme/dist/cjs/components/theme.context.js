"use client";
"use strict";var e=require("react/jsx-runtime"),t=require("react"),r=require("../util/script.js");const n=t.createContext(""),o=t.createContext((()=>{}));function s(e,r){const[n,o]=t.useState(!1);t.useEffect((()=>{if(n)return e();o(!0)}),r)}exports.ThemeProviderWithoutServerTheme=function({children:u,serverTheme:c,systemLightTheme:i,systemDarkTheme:m,attributes:a}){const[d,h]=t.useState(c);return t.useEffect((()=>{if("system"===d){const e=({matches:e})=>{e?[a].flat().forEach((e=>{document.documentElement.setAttribute(e,m)})):[a].flat().forEach((e=>{document.documentElement.setAttribute(e,i)}))},t=window.matchMedia("(prefers-color-scheme: dark)");return t.addEventListener("change",e),"undefined"!=typeof window&&window.matchMedia("(prefers-color-scheme: dark)").matches?[a].flat().forEach((e=>{document.documentElement.setAttribute(e,m)})):[a].flat().forEach((e=>{document.documentElement.setAttribute(e,i)})),()=>t.removeEventListener("change",e)}[a].flat().forEach((e=>{document.documentElement.setAttribute(e,d)}))}),[d]),s((()=>{"undefined"!=typeof cookieStore?cookieStore.set("theme",d):document.cookie=`theme=${d};`,localStorage.setItem("theme",d)}),[d]),t.useEffect((()=>{function e({key:e,newValue:t}){"theme"===e&&h(t)}return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)}),[]),e.jsx(o.Provider,{value:h,children:e.jsxs(n.Provider,{value:d,children:["system"===c&&e.jsx("script",{dangerouslySetInnerHTML:{__html:`(${r.setSystemDark.toString()})("[${a}]", "${i}", "${m}")`}}),u]})})},exports.useGetTheme=function(){return t.useContext(n)},exports.useOnChange=s,exports.useSetTheme=function(){return t.useContext(o)},exports.useTheme=function(){return[t.useContext(n),t.useContext(o)]};
//# sourceMappingURL=theme.context.js.map
